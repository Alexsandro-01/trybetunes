(this.webpackJsonptrybetunes=this.webpackJsonptrybetunes||[]).push([[0],{29:function(e,t,n){},32:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(21),i=n.n(r),s=(n(29),n(3)),o=n(4),l=n(6),d=n(5),u=n(13),j=n(7),b=n(2),h=n.n(b),m=n(8),O=n(17),p="user",f=function(e){return localStorage.setItem(p,JSON.stringify(e))},v=function(e){return function(t){setTimeout((function(){t(e)}),1500)}},x=function(){return new Promise((function(e){var t=JSON.parse(localStorage.getItem(p));null===t&&(t={}),v(t)(e)}))},g=function(e){return new Promise((function(t){f(Object(O.a)(Object(O.a)({},{name:"",email:"",image:"",description:""}),e)),v("OK")(t)}))},S=function(e){return new Promise((function(t){f(Object(O.a)({},e)),v("OK")(t)}))},k=n(0),N=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(k.jsx)("div",{children:"Carregando..."})}}]),n}(a.Component),y=N,w=(n(32),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).checkUserName=function(t){var n=t.target.value;e.setState({disabled:n.length<3,userName:n})},e.state={userName:"",disabled:!0,redirect:!1,loading:!1},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.disabled,a=t.userName,c=t.loading,r=t.redirect;return Object(k.jsxs)("div",{"data-testid":"page-login",className:"login-container",children:[Object(k.jsx)("h1",{children:"Login"}),Object(k.jsxs)("div",{className:"login-inputs",children:[Object(k.jsx)("div",{children:Object(k.jsx)("input",{type:"text",name:"nameUser",id:"nameUser",value:a,onChange:this.checkUserName,"data-testid":"login-name-input"})}),Object(k.jsx)("div",{children:Object(k.jsx)("button",{type:"button",disabled:n,onClick:function(){e.setState({loading:!0},Object(m.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,g({name:a});case 3:t.t1=t.sent,t.t2="OK"===t.t1,t.t3={loading:!1,redirect:t.t2},t.t0.setState.call(t.t0,t.t3);case 7:case"end":return t.stop()}}),t)}))))},"data-testid":"login-submit-button",children:"Entrar"})}),c&&Object(k.jsx)(y,{}),r&&Object(k.jsx)(j.a,{to:"/search"})]})]})}}]),n}(a.Component)),I=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(k.jsx)("div",{"data-testid":"page-not-found",children:"NotFound"})}}]),n}(a.Component),C=I,T=function(){var e=Object(m.a)(h.a.mark((function e(t){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://itunes.apple.com/lookup?id=".concat(t,"&entity=song"));case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a.results);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=T,F=n(24),E="favorite_songs";JSON.parse(localStorage.getItem(E))||localStorage.setItem(E,JSON.stringify([]));var D=function(){return JSON.parse(localStorage.getItem(E))},P=function(e){return localStorage.setItem(E,JSON.stringify(e))},A=function(e){return function(t){setTimeout((function(){t(e)}),500)}},J=function(){return new Promise((function(e){var t=D();A(t)(e)}))},K=function(e){return new Promise((function(t){if(e){var n=D();P([].concat(Object(F.a)(n),[e]))}A("OK")(t)}))},M=function(e){return new Promise((function(t){var n=D();P(n.filter((function(t){return t.trackId!==e.trackId}))),A("OK")(t)}))},L=(n(41),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).recoverUser=Object(m.a)(h.a.mark((function t(){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x();case 2:return n=t.sent,t.t0=e,t.next=6,n.name;case 6:t.t1=t.sent,t.t2={user:t.t1,loading:!1},t.t0.setState.call(t.t0,t.t2);case 9:case"end":return t.stop()}}),t)}))),e.state={user:"",loading:!0},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.recoverUser()}},{key:"render",value:function(){var e=this.state,t=e.user,n=e.loading;return Object(k.jsxs)("header",{"data-testid":"header-component",children:[Object(k.jsxs)("section",{children:[Object(k.jsx)("div",{children:Object(k.jsx)("h1",{children:"Stream Tune"})}),Object(k.jsx)("div",{children:n?Object(k.jsx)(y,{}):Object(k.jsxs)("span",{children:["Bem vindo(a) de volta",Object(k.jsx)("strong",{"data-testid":"header-user-name",children:t})]})})]}),Object(k.jsxs)("ul",{children:[Object(k.jsx)("li",{children:Object(k.jsx)(u.b,{"data-testid":"link-to-search",to:"/search",children:"Search"})}),Object(k.jsx)("li",{children:Object(k.jsx)(u.b,{"data-testid":"link-to-favorites",to:"/favorites",children:"Favorites"})}),Object(k.jsx)("li",{children:Object(k.jsx)(u.b,{"data-testid":"link-to-profile",to:"/profile",children:"Profile"})})]})]})}}]),n}(a.Component)),R=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).toggleFavoriteSongs=function(t,n){t.target.checked?e.addToFavorites(n):e.removeToFavoriteSongs(n)},e.removeToFavoriteSongs=function(t){var n=e.props.funFavoriteSongs;e.setState({loading:!0},Object(m.a)(h.a.mark((function a(){var c;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,M(t);case 2:c=a.sent,e.setState({loading:"OK"===!c,checked:!1}),n&&n();case 5:case"end":return a.stop()}}),a)}))))},e.addToFavorites=function(t){e.setState({loading:!0},Object(m.a)(h.a.mark((function n(){var a;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,K(t);case 2:a=n.sent,e.setState({loading:"OK"===!a,checked:!0});case 4:case"end":return n.stop()}}),n)}))))},e.checkFavorites=function(){var t=e.props,n=t.music;t.favoriteSongs.some((function(e){return e.trackId===n.trackId}))&&e.setState({checked:!0})},e.state={loading:!1,checked:!1},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.checkFavorites()}},{key:"render",value:function(){var e=this,t=this.props.music,n=this.state,a=n.loading,c=n.checked;return Object(k.jsx)("section",{children:t.trackId&&Object(k.jsxs)("div",{className:"card-music-container",children:[Object(k.jsx)("div",{className:"card-music-thumb",children:Object(k.jsx)("img",{src:t.artworkUrl100,alt:"Thumbnail do alb\xfam"})}),Object(k.jsx)("div",{className:"card-music-trackName",children:Object(k.jsx)("p",{children:t.trackName})}),Object(k.jsx)("div",{className:"card-music-player",children:t.previewUrl&&Object(k.jsx)("audio",{"data-testid":"audio-component",src:t.previewUrl,controls:!0,children:Object(k.jsx)("track",{kind:"captions"})})}),Object(k.jsx)("div",{className:"card-music-saveFavorite",children:a?Object(k.jsx)(y,{}):Object(k.jsxs)("label",{htmlFor:t.trackId,children:["Favorita",Object(k.jsx)("input",{type:"checkbox",name:"favorite-input",checked:c,"data-testid":"checkbox-music-".concat(t.trackId),onChange:function(n){e.toggleFavoriteSongs(n,t)},id:t.trackId})]})})]})})}}]),n}(a.Component);R.defaultProps={favoriteSongs:[],funFavoriteSongs:function(){}};var B=R,q=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).receiveAlbum=Object(m.a)(h.a.mark((function t(){var n,a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.match.params.id,t.next=3,U(n);case 3:a=t.sent,e.setState({albumReceived:a});case 5:case"end":return t.stop()}}),t)}))),e.favoriteSongs=function(){e.setState({loading:!0},Object(m.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,J();case 3:t.t1=t.sent,t.t2={loading:!1,favoriteSongsList:t.t1},t.t0.setState.call(t.t0,t.t2);case 6:case"end":return t.stop()}}),t)}))))},e.state={loading:!1,albumReceived:[],favoriteSongsList:[]},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.receiveAlbum(),this.favoriteSongs()}},{key:"render",value:function(){var e=this.state,t=e.albumReceived,n=e.loading,a=e.favoriteSongsList;return Object(k.jsxs)("div",{"data-testid":"page-album",children:[Object(k.jsx)(L,{}),t.length>0&&Object(k.jsxs)("section",{children:[Object(k.jsxs)("div",{children:[Object(k.jsx)("div",{className:"img-album",children:Object(k.jsx)("img",{src:t[0].artworkUrl100,alt:""})}),Object(k.jsxs)("div",{className:"description-album",children:[Object(k.jsx)("h3",{"data-testid":"album-name",children:t[0].collectionName}),Object(k.jsx)("p",{"data-testid":"artist-name",children:t[0].artistName})]})]}),Object(k.jsx)("div",{children:n?Object(k.jsx)(y,{}):t.map((function(e,t){return Object(k.jsx)(B,{music:e,favoriteSongs:a},t)}))})]})]})}}]),n}(a.Component),_=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).favoriteSongs=function(){e.setState({loading:!0},Object(m.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,J();case 3:t.t1=t.sent,t.t2={loading:!1,favoriteSongsList:t.t1},t.t0.setState.call(t.t0,t.t2);case 6:case"end":return t.stop()}}),t)}))))},e.state={loading:!1,favoriteSongsList:[]},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.favoriteSongs()}},{key:"render",value:function(){var e=this,t=this.state,n=t.favoriteSongsList,a=t.loading;return Object(k.jsxs)("div",{"data-testid":"page-favorites",children:[Object(k.jsx)(L,{}),Object(k.jsx)("h3",{children:"Musicas Favoritas"}),Object(k.jsx)("div",{children:Object(k.jsx)("div",{children:a?Object(k.jsx)(y,{}):n.map((function(t,a){return Object(k.jsx)(B,{music:t,funFavoriteSongs:e.favoriteSongs,favoriteSongs:n},a)}))})})]})}}]),n}(a.Component),z=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).findUser=function(){e.setState({loading:!0},Object(m.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,x();case 3:t.t1=t.sent,t.t2={loading:!1,profile:t.t1},t.t0.setState.call(t.t0,t.t2);case 6:case"end":return t.stop()}}),t)}))))},e.state={loading:!1,profile:{}},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.findUser()}},{key:"render",value:function(){var e=this.state,t=e.profile,n=e.loading;return Object(k.jsxs)("div",{"data-testid":"page-profile",children:[Object(k.jsx)(L,{}),n?Object(k.jsx)(y,{}):Object(k.jsxs)("section",{children:[Object(k.jsxs)("div",{className:"img-user",children:[Object(k.jsx)("img",{"data-testid":"profile-image",src:t.image,alt:t.name}),Object(k.jsx)("button",{type:"button",children:Object(k.jsx)(u.b,{to:"/profile/edit",children:"Editar perfil"})})]}),Object(k.jsxs)("div",{className:"name-user",children:[Object(k.jsx)("p",{children:Object(k.jsx)("strong",{children:"Nome:"})}),Object(k.jsx)("p",{children:t.name})]}),Object(k.jsxs)("div",{className:"email-user",children:[Object(k.jsx)("p",{children:Object(k.jsx)("strong",{children:"Email:"})}),Object(k.jsx)("p",{children:t.email})]}),Object(k.jsxs)("div",{className:"description-user",children:[Object(k.jsx)("p",{children:Object(k.jsx)("strong",{children:"Descri\xe7\xe3o:"})}),Object(k.jsx)("p",{children:t.description})]})]})]})}}]),n}(a.Component),G=n(16),H=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).checkDisabled=function(){var t=e.state,n=t.name,a=t.email,c=t.image,r=t.description,i=t.validEmail;""!==n&&""!==a&&""!==c&&""!==r&&i&&e.setState({disabled:!1})},e.findUser=function(){e.setState({loading:!0},Object(m.a)(h.a.mark((function t(){var n,a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x();case 2:n=t.sent,a=/\S+@\S+\.\S+/,e.setState({loading:!1,name:n.name,email:n.email,image:n.image,description:n.description,validEmail:a.test(n.email)}),e.checkDisabled();case 6:case"end":return t.stop()}}),t)}))))},e.editUser=function(){var t=e.state,n=t.name,a=t.email,c=t.image,r=t.description;e.setState({loading:!0},Object(m.a)(h.a.mark((function t(){var i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S({name:n,email:a,image:c,description:r});case 2:i=t.sent,e.setState({loading:!1,redirect:"OK"===i});case 4:case"end":return t.stop()}}),t)}))))},e.handleInputs=function(t){var n=t.target,a=n.name,c=n.value;e.setState(Object(G.a)({},a,c)),e.checkDisabled()},e.validateEmail=function(t){var n=t.target.value;e.setState({validEmail:/\S+@\S+\.\S+/.test(n)})},e.state={loading:!1,disabled:!0,redirect:!1,name:"",email:"",image:"",description:"",validEmail:!1},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.findUser()}},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,a=t.disabled,c=t.name,r=t.email,i=t.image,s=t.description,o=t.redirect;return Object(k.jsxs)("div",{"data-testid":"page-profile-edit",children:[Object(k.jsx)(L,{}),n?Object(k.jsx)(y,{}):Object(k.jsxs)("section",{children:[Object(k.jsxs)("div",{className:"img-user",children:[Object(k.jsx)("img",{"data-testid":"profile-image",src:i,alt:c}),Object(k.jsx)("input",{"data-testid":"edit-input-image",name:"image",type:"text",placeholder:"Editar imagem",onChange:function(t){e.handleInputs(t)},value:i,autoComplete:"none"})]}),Object(k.jsxs)("div",{className:"name-user",children:[Object(k.jsx)("p",{children:Object(k.jsx)("strong",{children:"Nome:"})}),Object(k.jsx)("input",{"data-testid":"edit-input-name",name:"name",type:"text",placeholder:"Editar nome",onChange:function(t){e.handleInputs(t)},value:c})]}),Object(k.jsxs)("div",{className:"email-user",children:[Object(k.jsx)("p",{children:Object(k.jsx)("strong",{children:"Email:"})}),Object(k.jsx)("input",{"data-testid":"edit-input-email",name:"email",type:"email",placeholder:"Editar email",onChange:function(t){e.handleInputs(t)},onBlur:function(t){e.validateEmail(t)},value:r,id:"email"})]}),Object(k.jsxs)("div",{className:"description-user",children:[Object(k.jsx)("p",{children:Object(k.jsx)("strong",{children:"Descri\xe7\xe3o:"})}),Object(k.jsx)("input",{"data-testid":"edit-input-description",name:"description",type:"text",placeholder:"Editar descri\xe7\xe3o",onChange:function(t){e.handleInputs(t)},value:s})]}),Object(k.jsx)("div",{className:"button-edit-user",children:Object(k.jsx)("button",{"data-testid":"edit-button-save",disabled:a,type:"button",onClick:this.editUser,children:"Salvar"})}),o&&Object(k.jsx)(j.a,{to:"/profile"})]})]})}}]),n}(a.Component),Q=(n(42),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props.album,t=e.artistName,n=e.collectionId,a=e.collectionName,c=e.artworkUrl100;return Object(k.jsx)("section",{className:"artist-card-container",children:Object(k.jsxs)("div",{className:"card-artist",children:[Object(k.jsx)("img",{src:c,alt:t}),Object(k.jsx)("h5",{children:Object(k.jsx)(u.b,{to:"/album/".concat(n),"data-testid":"link-to-album-".concat(n),children:a})}),Object(k.jsx)("p",{id:"artist-name",children:t})]})})}}]),n}(a.Component));Q.defaultProps={album:{}};var V=Q,W=function(){var e=Object(m.a)(h.a.mark((function e(t){var n,a,c,r,i,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=encodeURI(t).replaceAll("%20","+"),a="https://itunes.apple.com/search?entity=album&term=".concat(n,"&attribute=allArtistTerm"),e.next=4,fetch(a);case 4:return c=e.sent,e.next=7,c.json();case 7:return r=e.sent,i=r.results,s=i.map((function(e){return{artistId:e.artistId,artistName:e.artistName,collectionId:e.collectionId,collectionName:e.collectionName,collectionPrice:e.collectionPrice,artworkUrl100:e.artworkUrl100,releaseDate:e.releaseDate,trackCount:e.trackCount}})),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=W,Y=(n(43),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).checkTermToSearch=function(t){var n=t.target.value;e.setState({disabled:n.length<2,termToSearch:n})},e.albums=function(t){e.setState({loading:!0,termToSearch:""},Object(m.a)(h.a.mark((function n(){var a;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,X(t);case 2:a=n.sent,e.setState({albumsOfTheArtist:a,disabled:!0,loading:!1,search:!0,lastTermSearched:t});case 4:case"end":return n.stop()}}),n)}))))},e.state={termToSearch:"",lastTermSearched:"",albumsOfTheArtist:[],disabled:!0,loading:!1,search:!1},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.termToSearch,a=t.disabled,c=t.loading,r=t.search,i=t.albumsOfTheArtist,s=t.lastTermSearched;return Object(k.jsxs)("div",{"data-testid":"page-search",className:"container",children:[Object(k.jsx)(L,{}),Object(k.jsx)("section",{className:"search-container-inputs",children:c?Object(k.jsx)(y,{}):Object(k.jsxs)("div",{className:"search-input-container",children:[Object(k.jsx)("input",{type:"text",name:"search",id:"search",value:n,onChange:this.checkTermToSearch,"data-testid":"search-artist-input"}),Object(k.jsx)("button",{type:"button",disabled:a,"data-testid":"search-artist-button",onClick:function(){e.albums(n)},children:"Pesquisar"})]})}),r&&i.length>0&&Object(k.jsxs)("section",{className:"search-result-container",children:[Object(k.jsx)("p",{children:"Resultado de \xe1lbuns de: ".concat(s)}),Object(k.jsx)("hr",{}),Object(k.jsx)("div",{className:"albuns-result",children:i.map((function(e){return Object(k.jsx)(V,{album:e},e.collectionId)}))})]}),r&&0===i.length&&Object(k.jsx)("p",{children:"Nenhum \xe1lbum foi encontrado"})]})}}]),n}(a.Component)),Z=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(k.jsx)("div",{className:"App",children:Object(k.jsx)(u.a,{children:Object(k.jsxs)(j.d,{children:[Object(k.jsx)(j.b,{path:"/profile/edit",component:H}),Object(k.jsx)(j.b,{exact:!0,path:"/profile",component:z}),Object(k.jsx)(j.b,{path:"/favorites",component:_}),Object(k.jsx)(j.b,{path:"/album/:id",component:q}),Object(k.jsx)(j.b,{path:"/search",component:Y}),Object(k.jsx)(j.b,{exact:!0,path:"/",render:function(){return Object(k.jsx)(w,{})}}),Object(k.jsx)(j.b,{path:"*",component:C})]})})})}}]),n}(c.a.Component),$=Z;i.a.render(Object(k.jsx)(c.a.StrictMode,{children:Object(k.jsx)($,{})}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.38db97b2.chunk.js.map